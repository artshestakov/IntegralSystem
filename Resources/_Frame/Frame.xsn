<?xml version="1.0" encoding="utf-8"?>
<XSN Name="Frame.xsn">
  
  <Table Name="Clients" UID="{56FA2462-6654-402F-B1C8-C011AD1F57A4}" Alias="clts" LocalName="Клиент" LocalListName="Клиенты" TitleName="Name">
    <Fields>
      <Field UID="{55A9B30E-F067-4E57-BE7C-833D1423D454}" Name="Name" Type="String" LabelName="Наименование" LocalListName="Наименование" NotNull="true"/>
      <Field UID="{D4F26C63-CD6C-4EC0-9052-9DB361DD7859}" Name="Address" Type="String" LabelName="Адрес" LocalListName="Адрес"/>
      <Field UID="{516F2342-FAB6-487C-B8C1-58EEA2809312}" Name="MainContactPerson" Type="String" LabelName="Контактное лицо" LocalListName="Контактное лицо"/>
      <Field UID="{4A62F0BD-F764-4E20-898D-FF2B6894B218}" Name="Phone" Type="Phone" LabelName="Телефон" LocalListName="Телефон"/>
      <Field UID="{5F46B90E-3102-45A6-B8DC-4292ABE7B340}" Name="Comment" Type="Text" LabelName="Комментарий" LocalListName="Комментарий"/>
      <Field UID="{EEF67171-1CEE-4F62-9DF5-4BA0F3DD88A1}" Name="Call" Type="Bool" DefaultValue="false" LabelName="Звонок" LocalListName="Звонок" HideFromObject="true"/>
      <Field UID="{E0D6980E-2DA5-4EEB-B2A8-9C9F23113A66}" Name="Meeting" Type="Bool" DefaultValue="false" LabelName="Встреча" LocalListName="Встреча" HideFromObject="true"/>
      <Field UID="{36071091-8380-45FC-8085-6BCD00F0C8E5}" Name="CommercialSentence" Type="Bool" DefaultValue="false" LabelName="Коммерческое предложение" LocalListName="Коммерческое предложение" HideFromObject="true"/>
      <Field UID="{6490B5E9-3817-4CA6-88C1-FACC073E3BF9}" Name="Treaty" Type="Bool" DefaultValue="false" LabelName="Договор" LocalListName="Договор" HideFromObject="true"/>
      <Field UID="{1EA1979D-0A93-4AEF-8C29-381F760CEC9F}" Name="InWork" Type="Bool" DefaultValue="false" LabelName="В работе" LocalListName="В работе" HideFromObject="true"/>
    </Fields>
    <Indexes>
      <Index Field="Name" Unique="true"/>
      <Index Field="Address"/>
      <Index Field="MainContactPerson"/>
      <Index Field="Phone"/>
      <Index Field="Comment"/>
      <Index Field="Call"/>
      <Index Field="Meeting"/>
      <Index Field="CommercialSentence"/>
      <Index Field="Treaty"/>
      <Index Field="InWork"/>
    </Indexes>
    <Escorts>
      <Escort LocalName="Контактные лица" TableName="ContactPerson" ClassFilter="ctpr_client = :ParentObjectID"/>
    </Escorts>
  </Table>
  
  <Table Name="ContactPerson" UID="{89F809F3-8882-46A8-B8C8-A1651C155DB8}" Alias="ctpr" LocalName="Контактное лицо" LocalListName="Контактные лица" ClassFilterField="Client" TitleName="FIO">
    <Fields>
      <Field UID="{94F2A3DE-1EB1-4E56-AEA5-8B0CBD3D2255}" Name="Client" Type="Int" LabelName="Клиент" LocalListName="Клиент" HideFromList="true" HideFromObject="true" NotNull="true"/>
      <Field UID="{5322FDED-14BA-4C1A-B818-2136928A302C}" Name="Position" Type="Int" LabelName="Должность" LocalListName="Должность"/>
      <Field UID="{C9CA75BC-6D39-4DBD-9524-F60D1212684D}" Name="FIO" Type="String" LabelName="ФИО" LocalListName="ФИО" NotNull="true"/>
      <Field UID="{A3034894-AEC9-4D1F-929E-572DC9136F58}" Name="PhoneMain" Type="String" LabelName="Телефон (сотовый)" LocalListName="Телефон (сотовый)" ControlWidget="ISPhoneMobileEdit"/>
      <Field UID="{1DF77B45-B8D4-415F-B35D-A061083F605E}" Name="PhoneOther" Type="String" LabelName="Телефон (дополнительный)" LocalListName="Телефон (дополнительный)"/>
    </Fields>
    <Indexes>
      <Index Field="Client"/>
      <Index Field="Position"/>
      <Index Field="FIO"/>
      <Index Field="PhoneMain"/>
      <Index Field="PhoneOther"/>
    </Indexes>
    <Foreigns>
      <Foreign Field="Client" ForeignClass="Clients" ForeignField="ID" ForeignViewNameField="Name"/>
      <Foreign Field="Position" ForeignClass="UserPosition" ForeignField="ID" ForeignViewNameField="Name"/>
    </Foreigns>
  </Table>

  <Table Name="UserPosition" UID="{C5296028-BE2F-4F1F-A4F3-468B5D050816}" Alias="urpn" LocalName="Должность" LocalListName="Должности" TitleName="Name">
    <Fields>
      <Field UID="{17D45D9F-F4B5-4C05-AE5D-C110A5B58EE5}" Name="Name" Type="String" LabelName="Наименование" LocalListName="Наименование" NotNull="true"/>
      <Field UID="{24567B08-3B02-4B1B-B7D7-81CC79BC6CCD}" Name="FullName" Type="String" LabelName="Полное наименование" LocalListName="Полное наименование" NotNull="false"/>
    </Fields>
    <Indexes>
      <Index Field="Name" Unique="true"/>
      <Index Field="FullName"/>
    </Indexes>
  </Table>
  
  <Table Name="Document" UID="{EFF6337D-75EB-4EC4-813E-7C16D92C8E7A}" Alias="docm" LocalName="Документ" LocalListName="Документы" TitleName="Organization">
    <Fields>
      <Field UID="{DDDCB4CE-6398-499A-A893-206DAE4960A9}" Name="Type" Type="Int" LabelName="Тип" LocalListName="Тип" NotNull="true"/>
      <Field UID="{5613B2FD-3843-4850-B690-149C43D3B9B5}" Name="Organization" Type="Int" LabelName="Организация" LocalListName="Организация" NotNull="true"/>
      <Field UID="{494E782B-61D6-43AB-8D42-CD3AC58E69FF}" Name="Comment" Type="String" LabelName="Комментарий" LocalListName="Комментарий"/>
    </Fields>
    <Indexes>
      <Index Field="Type"/>
      <Index Field="Organization"/>
      <Index Field="Comment"/>
    </Indexes>
    <Foreigns>
      <Foreign Field="Organization" ForeignClass="Clients" ForeignField="ID" ForeignViewNameField="Name"/>
      <Foreign Field="Type" ForeignClass="DocumentType" ForeignField="ID" ForeignViewNameField="Name"/>
    </Foreigns>
  </Table>

  <Table Name="DocumentType" UID="{13539295-20D1-4051-8987-3477F997E687}" Alias="dcmt" ShowOnly="true" LocalName="Тип документа" LocalListName="Типы документов" TitleName="Name">
    <Fields>
      <Field UID="{A2982BC4-12F9-433B-8E3F-183CFC1420F0}" Name="Name" Type="String" LabelName="Наименование" LocalListName="Наименование" NotNull="true"/>
    </Fields>
    <Indexes>
      <Index Field="Name" Unique="true"/>
    </Indexes>
  </Table>

  <Table Name="FormType" UID="{CA109473-BF55-4107-AD13-4C54A26303C6}" Alias="frty" ShowOnly="true" LocalName="Сформировать" LocalListName="Сформировать" TitleName="Name">
    <Fields>
      <Field UID="{97B07A7D-EB3A-4D15-817B-E7799D27C027}" Name="Name" Type="String" LabelName="Наименование" LocalListName="Наименование" NotNull="true"/>
    </Fields>
    <Indexes>
      <Index Field="Name" Unique="true"/>
    </Indexes>
  </Table>

  <Table Name="Ringing" UID="{0FA15EA5-4ACB-4232-B7E0-ADF18CFE8C24}" Alias="rngn" LocalName="Обзвон" LocalListName="Обзвон" TitleName="Organization">
    <Fields>
      <Field UID="{C91998A8-4821-4992-BB0E-6A2BFC8886AB}" Name="Type" Type="Int" LabelName="Тип" LocalListName="Тип"/>
      <Field UID="{D9AA843F-8B39-41A1-AEBB-E82AAACC634A}" Name="Organization" Type="String" LabelName="Организация" LocalListName="Организация" NotNull="true" LayoutName="Organization"/>
      <Field UID="{7AB248D3-AD92-4AE6-A052-C8F0D69F4DBE}" Name="Address" Type="String" LabelName="Адрес" LocalListName="Адрес" LayoutName="Organization" HideFromList="true"/>
      <Field UID="{0F0C46BE-C8C4-4D02-8BD6-C37CCD419746}" Name="ContactPerson" Type="String" LabelName="Контактное лицо" LocalListName="Контактное лицо" HideFromList="true" LayoutName="Person"/>
      <Field UID="{95FD4969-A1FB-4D84-9670-362DA0CC73E5}" Name="PhoneMain" Type="Phone" LabelName="Телефон контактного лица" LocalListName="Телефон контактного лица" HideFromList="true" LayoutName="Person"/>
      <Field UID="{A89369EB-124D-470F-ADDB-578B71EC6083}" Name="PhoneOther1" Type="Phone" LabelName="Телефон" LocalListName="Телефон" HideFromList="true" LayoutName="Phone"/>
      <Field UID="{275325F6-7974-424A-8D99-F8C6A489380A}" Name="PhoneOther2" Type="Phone" LabelName="Телефон" LocalListName="Телефон" HideFromList="true" LayoutName="Phone"/>
      <Field UID="{4D35A015-FB8B-422F-AAA1-237CC0FCB986}" Name="EMail" Type="EMail" LabelName="Электронная почта" LocalListName="Электронная почта" HideFromList="true"/>
      <Field UID="{5150EA4D-C2A0-4C5F-B91D-BDE08399E032}" Name="Result" Type="Int" LabelName="Результат" LocalListName="Результат"/>
      <Field UID="{BDB49679-B9BE-4E76-9498-C1E18D31F3B7}" Name="Note" Type="String" LabelName="Примечание" LocalListName="Примечание"/>
    </Fields>
    <Indexes>
      <Index Field="Type"/>
      <Index Field="Organization"/>
      <Index Field="Address"/>
      <Index Field="ContactPerson"/>
      <Index Field="PhoneMain"/>
      <Index Field="PhoneOther1"/>
      <Index Field="PhoneOther2"/>
      <Index Field="EMail"/>
      <Index Field="Result"/>
      <Index Field="Note"/>
    </Indexes>
    <Foreigns>
      <Foreign Field="Type" ForeignClass="OrganizationType" ForeignField="ID" ForeignViewNameField="Name"/>
      <Foreign Field="Result" ForeignClass="RingingResult" ForeignField="ID" ForeignViewNameField="Name"/>
    </Foreigns>
    <Escorts>
      <Escort LocalName="Подробности" TableName="RingingHistory" ClassFilter="rnhs_ringing = :ParentObjectID"/>
    </Escorts>
  </Table>

  <Table Name="OrganizationType" UID="{56496EBE-159C-41E0-8DA7-C693F3D3200C}" Alias="ortp" LocalName="Тип организации" LocalListName="Типы организаций" TitleName="Name">
    <Fields>
      <Field UID="{57B9EE31-77B7-4EEE-A97C-0874B1526B0F}" Name="Name" Type="String" LabelName="Наименование" LocalListName="Наименование" NotNull="true"/>
    </Fields>
    <Indexes>
      <Index Field="Name" Unique="true"/>
    </Indexes>
  </Table>
  
  <Table Name="RingingResult" UID="{6CF8EC4E-2EE5-4E2C-99BA-D4584E605347}" Alias="rnrs" LocalName="Результат звонка" LocalListName="Результаты звонков" TitleName="Name">
    <Fields>
      <Field UID="{D9A2B9A7-90F6-4D3F-B0FF-B1B549823389}" Name="Name" Type="String" LabelName="Наименование" LocalListName="Наименование" NotNull="true"/>
    </Fields>
    <Indexes>
      <Index Field="Name" Unique="true"/>
    </Indexes>
  </Table>

  <Table Name="RingingHistory" UID="{A852EBEF-20D9-4B09-A0AD-EAAC76A6DBC2}" Alias="rnhs" LocalName="Подробность" LocalListName="Подробности" TitleName="Note" ClassFilterField="Ringing">
    <Fields>
      <Field UID="{085EFCBB-DA90-41F2-AF39-F065D907CBF3}" Name="Ringing" Type="Int" LabelName="Обзвон" LocalListName="Обзвон" HideFromList="true" HideFromObject="true" NotNull="true"/>
      <Field UID="{DB242DBF-748A-4F64-92B9-277030ADD072}" Name="Note" Type="Text" LabelName="Примечание" LocalListName="Примечание"/>
    </Fields>
    <Indexes>
      <Index Field="Ringing"/>
      <Index Field="Note"/>
    </Indexes>
  </Table>

</XSN>