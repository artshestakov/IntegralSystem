<?xml version="1.0" encoding="utf-8"?>
<XSN Name="Device.xsn">

  <Table Name="_DeviceUser" UID="{BB8C552E-CBD1-4EDB-B4C1-B874EEEE5C1D}" Alias="dvus" LocalName="Устройство пользователя" LocalListName="Устройства пользователей" ObjectForm="ISDeviceUserObjectForm" TitleName="Name" IsSystem="true">
    <Fields>
      <Field UID="{0B009F27-4481-4408-8F62-9F717CD8FB04}" Name="User" Type="Int" DefaultValue="currentuserid()" LabelName="Пользователь" LocalListName="Пользователь" HideFromObject="true" NotNull="true"/>
      <Field UID="{12A257C4-C35F-457B-9CBD-D8A148B48000}" Name="Type" Type="Int" LabelName="Тип устройства" LocalListName="Тип устройства" NotNull="true"/>
      <Field UID="{71838AE2-CF94-4E1E-8CE5-42553A48765C}" Name="Device" Type="Int" LabelName="Устройство" LocalListName="Устройство" NotNull="true"/>
      <Field UID="{76A32DE2-492C-42BE-8538-07BF2335586C}" Name="Name" Type="String" LabelName="Наименование" LocalListName="Наименование" PlaceholderText="Введите наименование устройства" NotNull="true"/>
      <Field UID="{EEC2FF97-41E5-4213-A3D8-0F74EE5AD860}" Name="ComPort" Type="Int" LabelName="Порт" LocalListName="Порт"/>
      <Field UID="{669965A4-38F3-428C-8F51-4231D1D3F8B2}" Name="JsonSetting" Type="String" LabelName="Настройки" LocalListName="Настройки" HideFromObject="true"/>
    </Fields>
    <Indexes>
      <Index Field="User"/>
      <Index Field="Type"/>
      <Index Field="Device"/>
      <Index Field="Name"/>
      <Index Field="ComPort"/>
      <Index Field="JsonSetting"/>
      <Index Field="User;Type;Device" Unique="true"/>
      <Index Field="IsDeleted;User"/>
    </Indexes>
    <Foreigns>
      <Foreign Field="User" ForeignClass="_Users" ForeignField="ID" ForeignViewNameField="Surname;Name;Patronymic"/>
      <Foreign Field="Type" ForeignClass="_DeviceType" ForeignField="ID" ForeignViewNameField="Name"/>
      <Foreign Field="Device" ForeignClass="_Device" ForeignField="ID" ForeignViewNameField="Name"/>
      <Foreign Field="ComPort" ForeignClass="_ComPortType" ForeignField="ID" ForeignViewNameField="Name" OrderField="Order"/>
    </Foreigns>
  </Table>

  <Table Name="_DeviceType" UID="{787C6335-C2E9-4866-9012-CD65540D41AA}" Alias="dvtp" LocalName="Тип устройства" LocalListName="Типы устройств" TitleName="Name" IsSystem="true">
    <Fields>
      <Field UID="{509624A2-E1B5-4C93-AB39-922AEACD893C}" Name="Name" Type="String" LabelName="Наименование" LocalListName="Наименование" NotNull="true"/>
    </Fields>
    <Indexes>
      <Index Field="Name"/>
    </Indexes>
  </Table>
  
  <Table Name="_Device" UID="{C7BA5BF6-4AF8-4BB8-8F58-F61B0A731647}" Alias="dvce" LocalName="Устройство" LocalListName="Устройства" TitleName="Name" IsSystem="true">
    <Fields>
      <Field UID="{8C08A85F-FF8D-47F9-8425-A6F520A7BE03}" Name="Type" Type="UID" LabelName="Тип устроства" LocalListName="Тип устроства" NotNull="true"/>
      <Field UID="{06677D45-22E9-4358-84CE-B341EF9D2F4B}" Name="Name" Type="String" LabelName="Наименование" LocalListName="Наименование" NotNull="true"/>
      <Field UID="{DEF2DD8F-D66E-43D7-A62B-1AC66AF6C626}" Name="Class" Type="String" LabelName="Класс" LocalListName="Класс" NotNull="true"/>
    </Fields>
    <Indexes>
      <Index Field="Type"/>
      <Index Field="Name"/>
      <Index Field="Class"/>
    </Indexes>
    <Foreigns>
      <Foreign Field="Type" ForeignClass="_DeviceType" ForeignField="UID" ForeignViewNameField="Name"/>
    </Foreigns>
  </Table>

  <Table Name="_ComPortType" UID="{55E9DF65-B13B-4018-B161-1B4F9EDFCBF0}" Alias="cptp" ShowOnly="true" LocalName="Последовательный порт" LocalListName="Последовательные порты" TitleName="Name" IsSystem="true">
    <Fields>
      <Field UID="{CE71250D-EDFC-4C52-92C1-7C9C186BCF45}" Name="Name" Type="String" LabelName="Последовательный порт" LocalListName="Последовательный порт" NotNull="true"/>
      <Field UID="{2ACDE8EB-8156-410B-9711-3EA6D14FA2E6}" Name="Order" Type="Int" LabelName="Порядок" LocalListName="Порядок" NotNull="true"/>
    </Fields>
    <Indexes>
      <Index Field="Name" Unique="true"/>
      <Index Field="Order"/>
    </Indexes>
  </Table>
  
</XSN>