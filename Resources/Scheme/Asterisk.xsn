<?xml version="1.0" encoding="utf-8"?>
<XSN Name="Asterisk.xsn">

  <Table Name="_AsteriskCalls" UID="{008C71A7-7B62-48B9-A5AF-B2213ECE3840}" Alias="ascl" ShowOnly="true" LocalName="Звонок" LocalListName="Звонки" TitleName="UniqueID">
    <Fields>
      <Field UID="{4DDFDC28-B838-4FB9-9754-F46184F6B102}" Name="UniqueID" Type="String" LabelName="Идентификатор звонка" LocalListName="Идентификатор звонка" HideFromList="true"/>
      <Field UID="{D5F5057A-8124-4915-BB72-C9406B6D2CB0}" Name="Details" Type="CallDetails" LabelName="Подробности" LocalListName="Подробности" QueryText="SELECT (COUNT(*)::INTEGER > 1)::BOOLEAN FROM _asteriskcalls WHERE ascl_uniqueid = ascl.ascl_uniqueid"/>
      <Field UID="{F75049A3-0C22-4302-ACB9-FE25F20ACF54}" Name="DialBegin" Type="DateTime" LabelName="Дата и время звонка" LocalListName="Дата и время звонка" NotNull="true"/>
      <Field UID="{3A9E0438-5F58-46A3-BAAD-819C9FEE1FC5}" Name="Direction" Type="Int" LabelName="Направление" LocalListName="Направление" NotNull="true"/>
      <Field UID="{AB3A7D8D-3CD8-47F2-9CAB-2431D7C5C743}" Name="User" Type="Int" LabelName="Пользователь" LocalListName="Пользователь"/>
      <Field UID="{4AA97A6A-19B7-498E-9B9F-D8CD68E51784}" Name="Subscriber" Type="String" LabelName="Абонент" LocalListName="Абонент"/>
      <Field UID="{13867CAE-893C-4E5B-8441-7A98746EA3AC}" Name="Number" Type="String" LabelName="Кому" LocalListName="Кому" NotNull="true"/>
      <Field UID="{2A4D0AB7-EBBB-4CC7-8D85-58167FD511D5}" Name="DialEnd" Type="Seconds" LabelName="Длительность ожидания" LocalListName="Длительность ожидания"/>
      <Field UID="{8CDA6B10-F25B-4482-9F8F-9891CC778A35}" Name="Hangup" Type="Seconds" LabelName="Длительность разговора" LocalListName="Длительность разговора"/>
      <Field UID="{12222D6E-C1A1-4604-B589-16399498B4EA}" Name="Duration" Type="Seconds" LabelName="Общая длительность" LocalListName="Общая длительность"/>
      <Field UID="{42294DE9-ACF5-4C11-866C-55ACFB6D1133}" Name="DialStatus" Type="Int" LabelName="Статус" LocalListName="Статус"/>
      <Field UID="{0CAAD867-A8E8-4F1D-973C-4CE8378B4035}" Name="UserField" Type="String" LabelName="Пользовательское поле" LocalListName="Пользовательское поле" HideFromList="true"/>
    </Fields>
    <Indexes>
      <Index Field="UniqueID"/>
      <Index Field="DialBegin"/>
      <Index Field="Direction"/>
      <Index Field="User"/>
      <Index Field="Subscriber"/>
      <Index Field="Number"/>
      <Index Field="DialEnd"/>
      <Index Field="Hangup"/>
      <Index Field="Duration"/>
      <Index Field="DialStatus"/>
      <Index Field="UserField"/>
    </Indexes>
    <Foreigns>
      <Foreign Field="Direction" ForeignClass="_AsteriskDirection" ForeignField="ID" ForeignViewNameField="Name"/>
      <Foreign Field="User" ForeignClass="_Users" ForeignField="ID" ForeignViewNameField="Surname;Name;Patronymic"/>
      <Foreign Field="DialStatus" ForeignClass="_AsteriskCallStatus" ForeignField="ID" ForeignViewNameField="LocalName"/>
    </Foreigns>
  </Table>

  <Table Name="_AsteriskCallStatus" UID="{E1186516-F230-4EDA-9B59-02DF50F36414}" Alias="asds" LocalName="Тип обработки вызова" LocalListName="Типы обработки вызовов" TitleName="LocalName" IsSystem="true">
    <Fields>
      <Field UID="{464164A9-751C-44B9-8BCC-925737F89F0D}" Name="AsteriskName" Type="String" LabelName="Наименование" LocalListName="Наименование" NotNull="true"/>
      <Field UID="{A6DFC4D8-ED39-4519-BDEC-21C3785B856B}" Name="LocalName" Type="String" LabelName="Локальное наименование" LocalListName="Локальное наименование" NotNull="true"/>
      <Field UID="{91600660-4595-4429-9B14-627D22AD6145}" Name="Order" Type="Int" LabelName="Порядок" LocalListName="Порядок"/>
      <Field UID="{B7D2653B-2AB9-4744-AEE0-56519C2F8A6A}" Name="IconName" Type="String" LabelName="Иконка" LocalListName="Иконка"/>
      <Field UID="{36FCA6B8-68C4-46C4-81D0-B0B84263125C}" Name="Description" Type="String" LabelName="Описание" LocalListName="Описание"/>
    </Fields>
    <Indexes>
      <Index Field="AsteriskName" Unique="true"/>
      <Index Field="LocalName" Unique="true"/>
      <Index Field="Order"/>
      <Index Field="IconName"/>
      <Index Field="Description"/>
    </Indexes>
  </Table>
  
  <Table Name="_AsteriskDirection" UID="{4E0631C5-906F-45CB-ABF6-C11E8AA48920}" Alias="asdr" LocalName="Направление вызова" LocalListName="Направления вызовов" TitleName="Name" IsSystem="true">
    <Fields>
      <Field UID="{C1755326-6C4F-40F0-A3F1-A5F599EA8ED1}" Name="Name" Type="String" LabelName="Наименование" LocalListName="Наименование" NotNull="true"/>
    </Fields>
    <Indexes>
      <Index Field="Name" Unique="true"/>
    </Indexes>
  </Table>

  <Table Name="_AsteriskPattern" UID="{6FDDAECB-2E53-4931-ADCC-380F46903E73}" Alias="aspt" LocalName="Внутренний номер" LocalListName="Внутренние номера" TitleName="Pattern">
    <Fields>
      <Field UID="{DF508B31-D23A-43B7-91CC-E49224C2C1C9}" Name="User" Type="Int" LabelName="Пользователь" LocalListName="Пользователь" NotNull="true"/>
      <Field UID="{B9A14DA4-075D-4265-81AF-F5C3FC3E19C8}" Name="TelephonyType" Type="Int" LabelName="Тип телефонии" LocalListName="Тип телефонии" NotNull="true"/>
      <Field UID="{15D4D57F-79EC-41EE-A139-16A9D421D16C}" Name="Pattern" Type="String" LabelName="Внутренний номер" LocalListName="Внутренний номер" NotNull="true"/>
      <Field UID="{48358745-4247-4E81-A8C5-0A3C220B4C3B}" Name="Context" Type="String" LabelName="Исходящий контекст" LocalListName="Исходящий контекст" HideFromList="true"/>
      <Field UID="{1C2B7EE4-670A-4A81-8D5A-60CB18140E5D}" Name="CurrentStatus" Type="Int" LabelName="Текущий статус" LocalListName="Текущий статус" HideFromList="true" HideFromObject="true"/>
    </Fields>
    <Indexes>
      <Index Field="User" Unique="true"/>
      <Index Field="TelephonyType"/>
      <Index Field="Pattern" Unique="true"/>
      <Index Field="Context"/>
      <Index Field="CurrentStatus"/>
    </Indexes>
    <Foreigns>
      <Foreign Field="User" ForeignClass="_Users" ForeignField="ID" ForeignViewNameField="Surname;Name;Patronymic"/>
      <Foreign Field="TelephonyType" ForeignClass="_TelephonyType" ForeignField="ID" ForeignViewNameField="Name"/>
      <Foreign Field="CurrentStatus" ForeignClass="_AsteriskExtenStatus" ForeignField="ID" ForeignViewNameField="Name"/>
    </Foreigns>
  </Table>

  <Table Name="_TelephonyType" UID="{EC5A5F3F-135F-4E7F-92C8-DCD0AF67061B}" Alias="tpht" LocalName="Тип телефонии" LocalListName="Типы телефонии" TitleName="Name">
    <Fields>
      <Field UID="{A5A13950-BF4E-498C-8525-6BB82641FF3D}" Name="Name" Type="String" LabelName="Наименование" LocalListName="Наименование" NotNull="true"/>
      <Field UID="{99889F61-1272-4002-AD0F-DAB6E899078D}" Name="ClassName" Type="String" LabelName="Наименование класса" LocalListName="Наименование класса" NotNull="true"/>
    </Fields>
    <Indexes>
      <Index Field="Name" Unique="true"/>
      <Index Field="ClassName" Unique="true"/>
    </Indexes>
  </Table>

  <Table Name="_AsteriskExtenStatus" UID="{1E62A257-5747-49C2-8C68-CE7A9E01ED3F}" Alias="aest" LocalName="Статус внутреннего номера" LocalListName="Статусы внутренних номеров" TitleName="Name" IsSystem="true">
    <Fields>
      <Field UID="{1D7D3045-6553-4B7F-BDCD-8F4804BB9EA9}" Name="Code" Type="Int" LabelName="Код статуса" LocalListName="Код статуса" NotNull="true"/>
      <Field UID="{81F8985C-582B-4E85-AB3F-795EA58977A6}" Name="Name" Type="String" LabelName="Наименование" LocalListName="Наименование" NotNull="true"/>
      <Field UID="{1B833CD7-56C7-4838-BF2A-9F1A92F9A9DF}" Name="ToolTip" Type="String" LabelName="Всплывающее сообщение" LocalListName="Всплывающее сообщение" NotNull="true"/>
      <Field UID="{A7C9432A-071F-4A54-8CE5-39DF83A59E59}" Name="Icon" Type="String" LabelName="Иконка" LocalListName="Иконка" NotNull="true"/>
      <Field UID="{07F9CD88-B982-4DAA-9FA9-B3C0E660AB8B}" Name="BackgroundColor" Type="String" LabelName="Цвет фона" LocalListName="Цвет фона" NotNull="true"/>
    </Fields>
    <Indexes>
      <Index Field="Code" Unique="true"/>
      <Index Field="Name" Unique="true"/>
      <Index Field="ToolTip" Unique="true"/>
      <Index Field="Icon"/>
      <Index Field="BackgroundColor"/>
    </Indexes>
  </Table>

  <Table Name="_AsteriskQueue" UID="{0C62E853-4F16-43A6-9306-B79CAA4181D6}" Alias="astq" LocalName="Тип задачи очереди" LocalListName="Типы задач очереди" TitleName="Type" IsSystem="true">
    <Fields>
      <Field UID="{1624AB81-382B-475B-B871-39CA1E065DB5}" Name="Type" Type="Int" LabelName="Тип действия" LocalListName="Тип действия" NotNull="true"/>
      <Field UID="{037705F8-B89F-4D49-943D-3491508CAF22}" Name="Initiated" Type="Int" LabelName="Инициировал" LocalListName="Инициировал" NotNull="true"/>
      <Field UID="{7EC25763-9577-4BEB-9193-A24FAA111787}" Name="Parameters" Type="String" LabelName="Параметры" LocalListName="Параметры"/>
    </Fields>
    <Indexes>
      <Index Field="Type"/>
      <Index Field="Initiated"/>
      <Index Field="Parameters"/>
    </Indexes>
    <Foreigns>
      <Foreign Field="Type" ForeignClass="_AsteriskQueueType" ForeignField="ID" ForeignViewNameField="Name"/>
      <Foreign Field="Initiated" ForeignClass="_Users" ForeignField="ID" ForeignViewNameField="Surname;Name;Patronymic"/>
    </Foreigns>
  </Table>

  <Table Name="_AsteriskQueueType" UID="{2C84B2D0-3393-4C92-8B2F-B842C5EBBB9C}" Alias="asqt" LocalName="Тип действия" LocalListName="Типы действий" TitleName="Name" IsSystem="true">
    <Fields>
      <Field UID="{696297FD-F68F-4E3F-9747-804BC1AE9D30}" Name="Name" Type="String" LabelName="Наименование" LocalListName="Наименование" NotNull="true"/>
    </Fields>
    <Indexes>
      <Index Field="Name" Unique="true"/>
    </Indexes>
  </Table>
  
</XSN>