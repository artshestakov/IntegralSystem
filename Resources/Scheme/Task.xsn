<?xml version="1.0" encoding="utf-8"?>
<XSN Name="Task.xsn">

  <Table Name="_Task" UID="{0C4396AF-BD65-482C-BFE0-D46C072341AC}" Alias="task" LocalName="Задача" LocalListName="Задачи" ObjectForm="ISTaskObjectForm" TitleName="Name">
    <Fields>
      <Field UID="{9A1F7E8D-004D-4E4B-955C-5FCAFEDE2F32}" Name="Name" Type="String" ControlWidget="ISTaskNameEdit" LabelName="Заголовок" LocalListName="Заголовок" PlaceholderText="Что необходимо сделать?" NotNull="true"/>
      <Field UID="{660CEB99-2D94-4013-A805-E43E47BDA030}" Name="Description" Type="Text" ControlWidget="ISTaskDescriptionEdit" LabelName="Описание задачи" LocalListName="Описание задачи" PlaceholderText="Введите описание задачи" HideFromList="true"/>
      <Field UID="{FBF65264-BCA0-4882-86FD-AFF5A991B645}" Name="Executor" Type="Int" ControlWidget="ISExecutorEdit" LabelName="Исполнитель" LocalListName="Исполнитель"/>
      <Field UID="{9708C094-D404-4FDD-A17F-C7278D10B0B2}" Name="Type" Type="Int" LabelName="Тип задачи" LocalListName="Тип задачи"/>
      <Field UID="{9DE6B98E-FC28-48C3-9210-46FF9E285EEF}" Name="Priority" Type="Int" ControlWidget="ISTaskPriorityEdit" LabelName="Приоритет" LocalListName="Приоритет"/>
      
      <Field UID="{8436ADEA-14D0-43FC-90EC-ADD4AF905A7E}" Name="Owner" Type="Int" DefaultValue="currentuserid()" LabelName="Автор" LocalListName="Автор" NotNull="true"/>
      <Field UID="{9D4228B1-3DBB-4918-AA5B-A5B36189A2D8}" Name="Important" Type="Bool" DefaultValue="false" ControlWidget="ISTaskImportantEdit" LabelName="Это важная задача" LocalListName="Это важная задача"/>
      
      <Field UID="{4D76E89A-A38B-484C-A94F-6362137CF184}" Name="Status" Type="Int" LabelName="Статус задачи" LocalListName="Статус задачи" NotNull="true" HideFromObject="true"/>
    </Fields>
    <Indexes>
      <Index Field="Name"/>
      <Index Field="Description"/>
      <Index Field="Executor"/>
      <Index Field="Type"/>
      <Index Field="Priority"/>
      
      <Index Field="Owner"/>
      <Index Field="Important"/>
      
      <Index Field="Status"/>
    </Indexes>
    <Foreigns>
      <Foreign Field="Executor" ForeignClass="_Users" ForeignField="ID" ForeignViewNameField="Surname;Name;Patronymic"/>
      <Foreign Field="Type" ForeignClass="_TaskType" ForeignField="ID" ForeignViewNameField="Name"/>
      <Foreign Field="Priority" ForeignClass="_TaskPriority" ForeignField="ID" ForeignViewNameField="Name"/>
      
      <Foreign Field="Owner" ForeignClass="_Users" ForeignField="ID" ForeignViewNameField="Surname;Name;Patronymic"/>
      <Foreign Field="Status" ForeignClass="_TaskStatus" ForeignField="ID" ForeignViewNameField="Name"/>
    </Foreigns>
  </Table>

  <Table Name="_TaskType" UID="{F108B63C-E175-44E7-A67E-C896BE348266}" Alias="tstp" LocalName="Тип задачи" LocalListName="Типы задач" TitleName="Name">
    <Fields>
      <Field UID="{04B778F8-8045-46EE-B387-71DDD1DB335C}" Name="Name" Type="String" LabelName="Наименование" LocalListName="Наименование" NotNull="true"/>
    </Fields>
    <Indexes>
      <Index Field="Name" Unique="true"/>
    </Indexes>
  </Table>

  <Table Name="_TaskStatus" UID="{79619A77-8385-4AD9-BCB5-3E2B08479166}" Alias="tsst" ShowOnly="true" LocalName="Статус задачи" LocalListName="Статусы задач" TitleName="Name" IsSystem="true">
    <Fields>
      <Field UID="{0E0D9E42-AFD9-4798-8B7B-F98237FE72F4}" Name="Name" Type="String" LabelName="Наименование" LocalListName="Наименование" NotNull="true"/>
    </Fields>
    <Indexes>
      <Index Field="Name" Unique="true"/>
    </Indexes>
  </Table>

  <Table Name="_TaskPriority" UID="{BD3CB96B-C467-4818-85B5-3EF73389736A}" Alias="tspr" ShowOnly="true" LocalName="Приоритет задачи" LocalListName="Приоритеты задач" TitleName="Name" IsSystem="true">
    <Fields>
      <Field UID="{FE34E605-10A3-47A3-8DC2-A3C99EFF707D}" Name="Name" Type="String" LabelName="Наименование" LocalListName="Наименование" NotNull="true"/>
    </Fields>
    <Indexes>
      <Index Field="Name" Unique="true"/>
    </Indexes>
  </Table>

  <Table Name="_TaskComment" UID="{A37809AE-7889-4E2A-B314-6E86BFD7F0A7}" Alias="tcom" LocalName="Комментарий к задаче" LocalListName="Комментарии к задачам" TitleName="Comment" IsSystem="true">
    <Fields>
      <Field UID="{47664BE4-308A-4B69-8E8E-76E8111F0110}" Name="Task" Type="Int" LabelName="Задача" LocalListName="Задача" NotNull="true"/>
      <Field UID="{4CD5CB3E-4E7E-44F4-8D42-BDE4565BA975}" Name="User" Type="Int" LabelName="Пользователь" LocalListName="Пользователь" NotNull="true"/>
      <Field UID="{2B8CFE09-5BF7-4AAA-B206-CA646868E322}" Name="Comment" Type="Text" LabelName="Комментарий" LocalListName="Комментарий" NotNull="true"/>
    </Fields>
    <Indexes>
      <Index Field="Task"/>
      <Index Field="User"/>
      <Index Field="Comment"/>
    </Indexes>
    <Foreigns>
      <Foreign Field="Task" ForeignClass="_Task" ForeignField="ID" ForeignViewNameField="Name"/>
      <Foreign Field="User" ForeignClass="_Users" ForeignField="ID" ForeignViewNameField="Surname;Name;Patronymic"/>
    </Foreigns>
  </Table>

  <Table Name="_TaskFile" UID="{648DE93D-3610-4259-99BD-B6BACA4027EF}" Alias="tfls" LocalName="Прекрепленный файл к задаче" LocalListName="Прекрепленные файлы к задачам" TitleName="FileName" IsSystem="true">
    <Fields>
      <Field UID="{D187B5F7-4BE2-4090-9DE9-A0F0F2C7A6CC}" Name="Task" Type="Int" LabelName="Задача" LocalListName="Задача" NotNull="true"/>
      <Field UID="{76AB72DF-EA51-4EC0-A871-5CDB3309DC44}" Name="User" Type="Int" LabelName="Пользователь" LocalListName="Пользователь" NotNull="true"/>
      <Field UID="{AB906A09-04C4-489A-9FE4-C99073208C38}" Name="FileName" Type="String" LabelName="Наименование файла" LocalListName="Наименование файла" NotNull="true"/>
      <Field UID="{FC64142E-513C-4FEB-8C7A-7CC6F4B81AAA}" Name="Size" Type="String" LabelName="Размер файла" LocalListName="Размер файла" NotNull="true"/>
      <Field UID="{C83CD8CA-4201-456E-9A00-89AE8897950E}" Name="Icon" Type="ByteArray" LabelName="Иконка" LocalListName="Иконка" NotNull="true"/>
      <Field UID="{45F25D94-2A21-411D-A9FC-74EBBFE60BED}" Name="Note" Type="Text" LabelName="Примечание" LocalListName="Примечание"/>
    </Fields>
    <Indexes>
      <Index Field="Task"/>
      <Index Field="User"/>
      <Index Field="FileName"/>
      <Index Field="Size"/>
      <Index Field="Note"/>
    </Indexes>
    <Foreigns>
      <Foreign Field="Task" ForeignClass="_Task" ForeignField="ID" ForeignViewNameField="Name"/>
      <Foreign Field="User" ForeignClass="_Users" ForeignField="ID" ForeignViewNameField="Surname;Name;Patronymic"/>
    </Foreigns>
  </Table>

  <Table Name="_TaskFileData" UID="{23649101-5ACE-4EE0-92B5-53DC4DB05402}" Alias="tfdt" LocalName="Данные прекрепленного файла к задаче" LocalListName="Данные прекрепленных файлов к задачам" TitleName="TaskFile" IsSystem="true">
    <Fields>
      <Field UID="{E9F0E15B-6662-48D6-9322-1F26ABEBD760}" Name="TaskFile" Type="Int" LabelName="Файл" LocalListName="Файл" NotNull="true"/>
      <Field UID="{6FE47E22-1AF9-4081-B26A-618641FC6304}" Name="Data" Type="ByteArray" LabelName="Данные" LocalListName="Данные" NotNull="true"/>
    </Fields>
    <Indexes>
      <Index Field="TaskFile"/>
    </Indexes>
    <Foreigns>
      <Foreign Field="TaskFile" ForeignClass="_TaskFile" ForeignField="ID" ForeignViewNameField="FileName"/>
    </Foreigns>
  </Table>

  <Table Name="_TaskLink" UID="{84C4A18C-47D9-4451-9518-066B34F3EFEC}" Alias="tlnk" LocalName="Связанная задача" LocalListName="Связанные задачи" TitleName="LinkTask" IsSystem="true">
    <Fields>
      <Field UID="{426AE24B-9F82-478B-8AF2-CB5660D29AFA}" Name="Task" Type="Int" LabelName="Задача" LocalListName="Задача" NotNull="true"/>
      <Field UID="{3615E923-9B37-4E47-927B-738218705DDD}" Name="LinkTask" Type="Int" LabelName="Связанная задача" LocalListName="Связанная задача" NotNull="true"/>
      <Field UID="{91C50C07-D313-456C-96F9-E464FB09A238}" Name="UserLink" Type="Int" DefaultValue="currentuserid()" LabelName="Связал" LocalListName="Связал" NotNull="true"/>
    </Fields>
    <Indexes>
      <Index Field="Task"/>
      <Index Field="LinkTask"/>
      <Index Field="UserLink"/>
      <Index Field="Task;LinkTask"/>
    </Indexes>
    <Foreigns>
      <Foreign Field="Task" ForeignClass="_Task" ForeignField="ID" ForeignViewNameField="Name"/>
      <Foreign Field="LinkTask" ForeignClass="_Task" ForeignField="ID" ForeignViewNameField="Name"/>
      <Foreign Field="UserLink" ForeignClass="_Users" ForeignField="ID" ForeignViewNameField="Surname;Name;Patronymic"/>
    </Foreigns>
  </Table>

</XSN>